@* /Views/Shared/_AlertMessage.cshtml *@
<div id="alert-container" style="position: fixed; top: 80px; right: 20px; z-index: 2000; min-width:250px;">
    @if (TempData["Error"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            ❌ @TempData["Error"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["Msg"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            ✅ @TempData["Msg"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["Warning"] != null)
    {
        <div class="alert alert-warning alert-dismissible fade show" role="alert">
            ⚠️ @TempData["Warning"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }

    @if (TempData["Info"] != null)
    {
        <div class="alert alert-info alert-dismissible fade show" role="alert">
            ℹ️ @TempData["Info"]
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
    }
</div>

@section Scripts {
    <script>
        window.onload = () => {
            document.querySelectorAll('.alert').forEach(alertEl => {
                // 建立 Bootstrap Alert 實例
                const bsAlert = new bootstrap.Alert(alertEl);

                // 設定不同訊息的停留時間
                let delay = 1000; // success/info
                if (alertEl.classList.contains("alert-danger")) delay = 2000;
                if (alertEl.classList.contains("alert-warning")) delay = 3000;

                // 幾秒後關閉 (會觸發淡出動畫)
                setTimeout(() => {
                    alertEl.classList.remove("show"); // 🔑 手動移除 show，觸發 fade 動畫
                    setTimeout(() => bsAlert.close(), 500); // 🔑 等動畫結束再真正移除 DOM
                }, delay);
            });
        };
    </script>
}
