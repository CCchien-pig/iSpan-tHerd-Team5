@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "員工管理";
}
@section Styles {
    <link rel="stylesheet" href="//cdn.datatables.net/2.3.3/css/dataTables.dataTables.min.css" />
}

<div class="card shadow">
    <div class="card-header d-flex justify-content-between align-items-center">
        <span>員工列表（非 Member）</span>
    </div>
    <div class="card-body">
        <table id="tblUsers" class="table table-striped w-100">
            <thead>
                <tr>
                    <th>姓名</th>
                    <th>Email</th>
                    <th>電話</th>
                    <th>啟用</th>
                    <th>建立時間</th>
                    <th>角色</th>
                    <th>操作</th>
                </tr>
            </thead>
        </table>
    </div>
</div>

@section Scripts {
    <script src="//cdn.datatables.net/2.3.3/js/dataTables.min.js"></script>
    <script>
        const dt = new DataTable('#tblUsers', {
          processing: true, serverSide: true, searchDelay: 400,
          ajax: { url: '/USER/Admins/Users', type: 'GET', dataSrc: 'data' },
          columns: [
            { data: 'displayName' },
            { data: 'email' },
            { data: 'phoneNumber' },
            { data: 'isActive', render: v => v ? '是' : '否', className:'text-center' },
            { data: 'createdDate' },
            { data: 'roles' },
            { data: null, orderable:false, searchable:false,
              render: (d,t,row)=> `
                <div class="btn-group btn-group-sm">
                  <a class="btn btn-primary" href="/USER/Admins/Details/${row.id}">詳細</a>
                </div>`
            }
          ],
          order: [[4,'desc']]
        });
    </script>
}