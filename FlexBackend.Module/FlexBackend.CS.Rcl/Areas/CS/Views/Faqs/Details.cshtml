@model FlexBackend.Infra.Models.CsFaq
@{
    ViewData["Title"] = "FAQ 詳細";
    // 這兩個就是你下面要用的變數
    var back = ViewBag.ReturnUrl as string; // 從 Controller 帶進來的 returnUrl
    var fallback = Url.Action("Index", "Faqs", new { area = "CS" }); // 沒有 back 時的預設
    var goBackUrl = (!string.IsNullOrWhiteSpace(back) && Url.IsLocalUrl(back)) ? back : fallback;
}
@section Styles {
    <style>
        :root {
            --cat-bg: #f3e8ff;
            --cat-bd: #e9d5ff;
            --cat-fg: #6d28d9;
        }

        .badge-category {
            display: inline-block;
            padding: .28rem .5rem;
            font-size: .85rem;
            font-weight: 600;
            color: var(--cat-fg);
            background: var(--cat-bg);
            border: 1px solid var(--cat-bd);
            border-radius: .3rem;
        }

        .card {
            border-radius: 1rem;
        }
    </style>
}

<div class="d-flex align-items-center justify-content-between mb-3">
    <h1 class="h4 mb-0">@ViewData["Title"]</h1>
    <div class="btn-group">
        <!-- 返回：用 goBackUrl -->
        <a class="btn btn-outline-secondary" href="@goBackUrl">
            <i class="fa-solid fa-arrow-left"></i> 返回列表
        </a>
        <!-- 編輯：把 goBackUrl 帶進去 -->
        <a class="btn btn-primary"
           asp-action="Edit"
           asp-route-id="@Model.FaqId"
           asp-route-returnUrl="@goBackUrl">
            <i class="fa-solid fa-pen"></i> 編輯
        </a>
    </div>
</div>

<div class="card shadow-sm">
    <div class="card-body">
        <dl class="row">
            <dt class="col-sm-2">標題</dt>
            <dd class="col-sm-10">@Model.Title</dd>

            <dt class="col-sm-2">分類</dt>
            <dd class="col-sm-10">
                @(Model.Category?.CategoryName == null
                                ? Html.Raw("<span class='text-muted'>未分類</span>")
                                : Html.Raw($"<span class='badge-category'>{Model.Category.CategoryName}</span>"))
            </dd>

            <dt class="col-sm-2">答案內容</dt>
            <dd class="col-sm-10"><div class="border rounded p-3 bg-light">@Html.Raw(Model.AnswerHtml)</div></dd>

            <dt class="col-sm-2">排序</dt>
            <dd class="col-sm-10">@Model.OrderSeq</dd>

            <dt class="col-sm-2">最近發布時間</dt>
            <dd class="col-sm-10">@Model.LastPublishedTime?.ToString("yyyy/MM/dd HH:mm")</dd>

            <dt class="col-sm-2">啟用</dt>
            <dd class="col-sm-10">@(Model.IsActive ? "啟用" : "停用")</dd>

            <dt class="col-sm-2">建立時間</dt>
            <dd class="col-sm-10">@Model.CreatedDate.ToString("yyyy/MM/dd HH:mm")</dd>

            <dt class="col-sm-2">修改時間</dt>
            <dd class="col-sm-10">@Model.RevisedDate?.ToString("yyyy/MM/dd HH:mm")</dd>
        </dl>
    </div>
</div>
